<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../bower_components/core-icon-button/core-icon-button.html">
<link rel="import" href="form-input.html">
<link rel="import" href="form-expanding-input.html">
<polymer-element name="question-option">
	<template>
		<style>
			:host {
				display: block;
				width: 100%;
				margin-top: 4px;
			}
			form-expanding-input {
				margin-left: 8px;
			}
		</style>
		<div layout horizontal center>
			<div hidden?="{{type!=1}}">
        <paper-checkbox checked="{{checked}}" toggles></paper-checkbox>
      </div>
      <div hidden?="{{type!=0}}">
        <paper-radio-button checked="{{checked}}" on-click="{{radioclick}}"></paper-radio-button>
      </div>
			<form-expanding-input id="input" label="" error="Please type something!" value="{{optionvalue}}"></form-expanding-input>
			<core-icon-button icon="cancel" on-click="{{deleteoption}}"></core-icon-button>
		</div>
	</template>
	<script>
	Polymer({
			publish: {
				type:{
					value:0,
					reflect:true
				},
				optionvalue:{
					value:'',
					reflect:true
				},
				checked:{
					value:false,
					reflect:true
				}
			},
			deleteoption: function(){
				console.log("delete option");
				this.remove();
			},
			triggerError: function(){
  			this.$.input.triggerError();
  		},
  		radioclick: function(){
        if(this.type==1) return; //because this is a multiple answer MCQ

        var clickedElement = this.id;
        //uncheck the rest of the options
        var children = this.parentNode.querySelectorAll('question-option');
        for (var i=0; i<children.length; i++) {
          if(children[i].id!=clickedElement) children[i].checked=false;
        }
      }
  	})
	</script>
</polymer-element>